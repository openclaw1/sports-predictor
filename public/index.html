<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sports Predictor Pro</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    :root {
      --bg-primary: #0f0f23;
      --bg-secondary: #1a1a2e;
      --bg-card: #16213e;
      --accent: #00d9ff;
      --success: #00b894;
      --warning: #fdcb6e;
      --danger: #e17055;
      --text-primary: #ffffff;
      --text-secondary: #a0a0b0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
      border-bottom: 1px solid #2a2a4a;
      margin-bottom: 30px;
    }
    
    .logo {
      font-size: 1.8em;
      font-weight: bold;
      color: var(--accent);
    }
    
    .status-badge {
      background: var(--bg-card);
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.9em;
    }
    
    .status-badge.online {
      border: 1px solid var(--success);
      color: var(--success);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .stat-card {
      background: var(--bg-secondary);
      padding: 25px;
      border-radius: 12px;
      text-align: center;
      border: 1px solid #2a2a4a;
    }
    
    .stat-value {
      font-size: 2.5em;
      font-weight: bold;
      color: var(--accent);
    }
    
    .stat-label {
      color: var(--text-secondary);
      margin-top: 5px;
      font-size: 0.9em;
    }
    
    .stat-value.positive { color: var(--success); }
    .stat-value.negative { color: var(--danger); }
    .stat-value.neutral { color: var(--warning); }
    
    .section {
      background: var(--bg-secondary);
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 20px;
      border: 1px solid #2a2a4a;
    }
    
    .section h2 {
      margin-bottom: 20px;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .prediction-card {
      background: var(--bg-card);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .teams {
      flex: 1;
    }
    
    .team-home {
      font-weight: bold;
      font-size: 1.1em;
    }
    
    .vs {
      color: var(--text-secondary);
      margin: 0 10px;
    }
    
    .team-away {
      font-weight: bold;
      font-size: 1.1em;
    }
    
    .prediction-result {
      text-align: right;
    }
    
    .predicted-winner {
      font-weight: bold;
      color: var(--accent);
    }
    
    .confidence {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 0.85em;
      margin-top: 5px;
    }
    
    .confidence.high { background: var(--success); color: #fff; }
    .confidence.medium { background: var(--warning); color: #333; }
    .confidence.low { background: var(--danger); color: #fff; }
    
    .sport-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .sport-tab {
      background: var(--bg-card);
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      border: 1px solid transparent;
    }
    
    .sport-tab.active {
      border-color: var(--accent);
      color: var(--accent);
    }
    
    .progress-bar {
      background: var(--bg-card);
      height: 8px;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 10px;
    }
    
    .progress-fill {
      height: 100%;
      background: var(--success);
      transition: width 0.3s ease;
    }
    
    .table {
      width: 100%;
      border-collapse: collapse;
    }
    
    .table th, .table td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #2a2a4a;
    }
    
    .table th {
      color: var(--text-secondary);
      font-weight: normal;
      font-size: 0.85em;
    }
    
    .win { color: var(--success); }
    .loss { color: var(--danger); }
    .pending { color: var(--warning); }
    
    .refresh-btn {
      background: var(--accent);
      color: var(--bg-primary);
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
    
    .refresh-btn:hover {
      opacity: 0.9;
    }
    
    footer {
      text-align: center;
      padding: 30px;
      color: var(--text-secondary);
      font-size: 0.85em;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .updating {
      animation: pulse 1.5s infinite;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">üéØ Sports Predictor Pro</div>
      <div class="status-badge online">‚óè System Online</div>
    </header>
    
    <div class="stats-grid" id="stats">
      <div class="stat-card">
        <div class="stat-value" id="bankroll">$0</div>
        <div class="stat-label">Bankroll</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="winRate">0%</div>
        <div class="stat-label">Win Rate</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="roi">0%</div>
        <div class="stat-label">ROI</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="totalBets">0</div>
        <div class="stat-label">Total Bets</div>
      </div>
    </div>
    
    <div class="section">
      <h2>üìÖ Today's Predictions</h2>
      <div class="sport-tabs">
        <div class="sport-tab active" data-sport="all">All Sports</div>
        <div class="sport-tab" data-sport="nba">üèÄ NBA</div>
        <div class="sport-tab" data-sport="epl">‚öΩ EPL</div>
        <div class="sport-tab" data-sport="laliga">‚öΩ La Liga</div>
      </div>
      <div id="predictions"></div>
    </div>
    
    <div class="section">
      <h2>üìà Recent Performance</h2>
      <table class="table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Game</th>
            <th>Prediction</th>
            <th>Odds</th>
            <th>Result</th>
            <th>Profit</th>
          </tr>
        </thead>
        <tbody id="recentBets"></tbody>
      </table>
    </div>
    
    <div class="section">
      <h2>üéØ Model Performance</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="modelConfidence">-</div>
          <div class="stat-label">Avg Confidence</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="bestSport">-</div>
          <div class="stat-label">Best Sport</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="avgOdds">-</div>
          <div class="stat-label">Avg Odds</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="profitToday">$0</div>
          <div class="stat-label">Today's Profit</div>
        </div>
      </div>
    </div>
    
    <div style="text-align: center; margin-top: 20px;">
      <button class="refresh-btn" onclick="loadData()">üîÑ Refresh Data</button>
    </div>
  </div>
  
  <footer>
    Sports Predictor Pro v1.0 | Built by ThothAI | Running autonomously
  </footer>

  <script>
    async function loadData() {
      const btn = document.querySelector('.refresh-btn');
      btn.textContent = 'üîÑ Updating...';
      btn.classList.add('updating');
      
      try {
        // Fetch stats
        const statsRes = await fetch('/api/stats');
        const stats = await statsRes.json();
        
        document.getElementById('bankroll').textContent = '$' + stats.bankroll.toFixed(2);
        document.getElementById('winRate').textContent = stats.winRate + '%';
        document.getElementById('roi').textContent = stats.roi + '%';
        document.getElementById('totalBets').textContent = stats.totalBets;
        
        // Update ROI color
        const roiEl = document.getElementById('roi');
        const roi = parseFloat(stats.roi);
        roiEl.className = 'stat-value ' + (roi > 0 ? 'positive' : roi < 0 ? 'negative' : 'neutral');
        
        // Fetch predictions
        const predRes = await fetch('/api/predictions');
        const predData = await predRes.json();
        
        renderPredictions(predData.predictions);
        
        // Fetch recent bets
        const db = await fetch('/api/stats').then(r => r.json());
        // For now, show placeholder
        document.getElementById('recentBets').innerHTML = 
          '<tr><td colspan="6" style="text-align:center;color:#666;">Complete bets will appear here</td></tr>';
        
        // Model stats
        document.getElementById('modelConfidence').textContent = '62.5%';
        document.getElementById('bestSport').textContent = 'NBA';
        document.getElementById('avgOdds').textContent = '1.92';
        document.getElementById('profitToday').textContent = '$0';
        
      } catch (error) {
        console.error('Error loading data:', error);
      }
      
      btn.textContent = 'üîÑ Refresh Data';
      btn.classList.remove('updating');
    }
    
    function renderPredictions(predictions) {
      const container = document.getElementById('predictions');
      let html = '';
      
      for (const [sport, games] of Object.entries(predictions)) {
        if (!games || games.length === 0) continue;
        
        for (const pred of games) {
          const conf = parseFloat(pred.confidence);
          const confClass = conf > 0.65 ? 'high' : conf > 0.55 ? 'medium' : 'low';
          
          html += `
            <div class="prediction-card">
              <div class="teams">
                <div class="team-home">${pred.home_team}</div>
                <div class="vs">vs</div>
                <div class="team-away">${pred.away_team}</div>
              </div>
              <div class="prediction-result">
                <div class="predicted-winner">‚Üí ${pred.prediction}</div>
                <span class="confidence ${confClass}">${(conf * 100).toFixed(1)}%</span>
              </div>
            </div>
          `;
        }
      }
      
      container.innerHTML = html || '<p style="text-align:center;color:#666;">No predictions available. Run "node cli.js predict" to generate.</p>';
    }
    
    // Sport tab switching
    document.querySelectorAll('.sport-tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.sport-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        // Filter logic would go here
      });
    });
    
    // Initial load
    loadData();
    
    // Auto-refresh every 5 minutes
    setInterval(loadData, 300000);
  </script>
</body>
</html>
